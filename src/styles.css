:root{
  --rose-50:#fafaf9;
  --rose-100:#f5f5f4;
  --rose-200:#e7e5e4;
  --rose-300:#d6d3d1;
  --rose-400:#a8a29e;
  --rose-500:#78716c;
  --slate-900:#0f172a;
  --slate-700:#334155;
  --slate-600:#475569;
  --white:#ffffff;
  --stone-600:#57534e;
  --stone-700:#44403c;
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,Apple Color Emoji,Segoe UI Emoji;background-color:var(--rose-50);color:var(--slate-700)}
body::before{content:"";position:fixed;inset:0;z-index:-1;background-image:url('./images/background_mobile.png');background-repeat:no-repeat;background-size:cover;background-position:center;}

@media (min-width:768px){
  body::before{background-image:url('./images/background_desktop.png')}
}

.container{max-width:1100px;margin:0 auto;padding:24px}
.login-container,.centered-container{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:16px;padding-top:48px;padding-bottom:48px}
.login-container .h1,.centered-container .h1{text-align:center}
.login-container .card,.centered-container .card{width:100%}
.h1{font-size:28px;font-weight:800;color:var(--rose-500);margin:0 0 12px}
.row{display:flex;gap:12px;align-items:center;justify-content:space-between}
.card{background:rgba(245,245,244,0.95);border:1px solid var(--rose-200);border-radius:16px;box-shadow:0 1px 4px rgba(0,0,0,0.06);padding:12px}

.btn{border:none;border-radius:12px;padding:8px 12px;background:var(--rose-500);color:white;cursor:pointer}
.btn:hover{background:var(--rose-400)}
.btn.outline{background:var(--rose-100);color:var(--rose-500);border:1px solid var(--rose-300)}
.btn.outline:hover{background:var(--rose-200)}
.btn.outline.active{background:var(--rose-300);border-color:var(--rose-400)}

.grid{display:grid;gap:2px}
.board{position:relative;aspect-ratio:1/1;width:min(90vw,700px);background:var(--rose-200);border-radius:16px;overflow:hidden;border:1px solid var(--rose-300)}
.board::before{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,rgba(148,163,184,0.08) 50%,rgba(120,113,108,0.06) 50%);pointer-events:none}
.board.placement.turn-w::before{background:linear-gradient(to bottom,rgba(148,163,184,0.08) 50%,rgba(120,113,108,0.16) 50%)}
.board.placement.turn-b::before{background:linear-gradient(to bottom,rgba(120,113,108,0.16) 50%,rgba(148,163,184,0.08) 50%)}
.square{display:flex;align-items:center;justify-content:center;position:relative;font-size:22px;user-select:none;transition:transform 0.15s ease}
.square.light{background:var(--rose-100)}
.square.dark{background:var(--rose-300)}
.square.half-white{background:rgba(255,255,255,0.94)}
.square.half-black{background:rgba(148,163,184,0.25)}
.square.active-half{box-shadow:inset 0 0 0 2px rgba(120,113,108,0.22)}
.square.inactive-half{opacity:0.9}
.square.blocked-feedback{background:var(--slate-900) !important;color:var(--white);transition:background 0.2s ease,color 0.2s ease}
.square.blocked-feedback .label{color:rgba(255,255,255,0.7)}
.square.blocked-feedback{animation:blocked-flash 0.45s ease-out}
.square.selected{outline:2px solid var(--rose-500);outline-offset:-2px}
.square .label{position:absolute;left:6px;bottom:4px;font-size:10px;color:rgba(0,0,0,0.45)}
.square.reach::after{content:"";position:absolute;width:14px;height:14px;border-radius:50%;background:rgba(120,113,108,0.8);box-shadow:0 0 0 4px rgba(120,113,108,0.25)}
.square[data-cost]:hover::before{content:attr(data-cost);position:absolute;top:6px;right:6px;background:rgba(15,23,42,0.85);color:white;font-size:10px;padding:2px 4px;border-radius:4px;pointer-events:none}
.square[data-cost]:hover{transform:translateY(-1px)}

.stone-wrapper{position:relative;display:flex;align-items:center;justify-content:center;color:var(--slate-700);width:88%;height:88%;}
.stone-wrapper .stone-icon{width:100%;height:100%;}
.stone-wrapper .stone-arrows{position:absolute;inset:0;width:100%;height:100%;pointer-events:none;}
.stone-wrapper.stone-white{color:var(--slate-700);}
.stone-wrapper.stone-black{color:var(--rose-50);}
.stone-wrapper.drop{animation:stone-drop 0.35s ease-out}

@keyframes stone-drop{
  0%{transform:translateY(-14px) scale(0.85);opacity:0}
  70%{transform:translateY(2px) scale(1.03);opacity:1}
  100%{transform:translateY(0) scale(1)}
}

.player-menu-cluster{display:flex;flex-direction:column;gap:10px;align-items:center;width:100%}
.player-menu-pair{display:flex;flex-wrap:wrap;justify-content:center;gap:0;border-radius:22px;overflow:hidden;box-shadow:0 12px 32px rgba(15,23,42,0.16);border:1px solid rgba(15,23,42,0.08);max-width:640px;width:100%}
.player-menu{flex:1 1 240px;padding:18px 20px;display:flex;flex-direction:column;gap:12px;position:relative}
.player-menu.player-white{background:rgba(255,255,255,0.92);color:var(--slate-700)}
.player-menu.player-black{background:rgba(15,23,42,0.88);color:rgba(255,255,255,0.92)}
.player-menu.active::after{content:"";position:absolute;inset:0;border:2px solid rgba(244,114,182,0.25);border-radius:18px;pointer-events:none}
.player-menu-header{display:flex;flex-direction:column;gap:4px}
.player-menu-color{text-transform:uppercase;font-size:11px;letter-spacing:0.08em;color:rgba(71,85,105,0.7)}
.player-menu.player-black .player-menu-color{color:rgba(248,250,252,0.65)}
.player-menu-name{font-size:18px;font-weight:700;color:inherit}
.player-menu-elo{font-size:13px;color:rgba(71,85,105,0.75)}
.player-menu.player-black .player-menu-elo{color:rgba(248,250,252,0.7)}
.player-menu-metrics{display:flex;gap:12px;flex-wrap:wrap}
.player-metric{flex:1 1 120px;padding:10px 12px;border-radius:14px;background:rgba(255,255,255,0.72);display:flex;flex-direction:column;gap:4px;min-width:120px;border:1px solid rgba(148,163,184,0.2)}
.player-menu.player-black .player-metric{background:rgba(15,23,42,0.55);border-color:rgba(148,163,184,0.35)}
.player-metric.time.active{box-shadow:0 0 0 2px rgba(244,114,182,0.25)}
.player-metric.time.critical{animation:blink 0.9s step-start infinite}
.metric-label{text-transform:uppercase;font-size:10px;letter-spacing:0.08em;color:rgba(71,85,105,0.65)}
.player-menu.player-black .metric-label{color:rgba(226,232,240,0.7)}
.metric-value{font-size:20px;font-weight:700;color:inherit}
.player-menu-footer{display:flex;flex-direction:column;gap:10px;margin-top:auto}
.player-menu-status{font-size:13px;font-weight:600}
.player-menu-status.thinking{color:var(--rose-500)}
.player-menu-status.waiting{color:rgba(71,85,105,0.75)}
.player-menu-status.passed{color:#b91c1c}
.player-menu-status.completed{color:#047857}
.player-menu-status.winner{color:#7c3aed}
.player-menu-status.loser{color:rgba(71,85,105,0.6)}
.player-menu.player-black .player-menu-status.thinking{color:#facc15}
.player-menu.player-black .player-menu-status.waiting{color:rgba(226,232,240,0.72)}
.player-menu.player-black .player-menu-status.passed{color:#f87171}
.player-menu.player-black .player-menu-status.completed{color:#bbf7d0}
.player-menu.player-black .player-menu-status.winner{color:#fbbf24}
.player-menu.player-black .player-menu-status.loser{color:rgba(226,232,240,0.7)}
.player-menu-status.placeholder{visibility:hidden}
.player-menu-pass{align-self:flex-start;padding:6px 14px;border-radius:999px;border:1px solid rgba(120,113,108,0.35);background:rgba(255,255,255,0.85);color:var(--slate-700);font-weight:600;cursor:pointer;transition:background 0.2s ease,color 0.2s ease,transform 0.15s ease}
.player-menu-pass:hover:not(:disabled){background:rgba(244,114,182,0.15);color:var(--rose-500);transform:translateY(-1px)}
.player-menu-pass:disabled{opacity:0.55;cursor:not-allowed}
.player-menu.player-black .player-menu-pass{background:rgba(255,255,255,0.12);border-color:rgba(255,255,255,0.35);color:rgba(255,255,255,0.92)}
.player-menu.player-black .player-menu-pass:hover:not(:disabled){background:rgba(255,255,255,0.2);color:#fbbf24}
.move-counter{font-size:14px;font-weight:600;color:var(--stone-600)}

@keyframes blink{
  0%,50%{opacity:1}
  50.01%,100%{opacity:0.4}
}

@keyframes blocked-flash{
  0%{box-shadow:0 0 0 0 rgba(15,23,42,0.35)}
  70%{box-shadow:0 0 0 12px rgba(15,23,42,0)}
  100%{box-shadow:0 0 0 0 rgba(15,23,42,0)}
}

.game-container{display:flex;flex-direction:column;gap:20px;min-height:100vh}
.game-top-row{position:relative;display:flex;justify-content:center;align-items:flex-start;padding-top:12px}
.game-top-row .resign{position:absolute;top:0;right:0}
.game-main{display:flex;flex-wrap:wrap;justify-content:center;align-items:flex-start;gap:24px}
.board-container{display:flex;justify-content:center;flex:0 1 auto}
.phase-panel{flex:1 1 320px;min-width:300px;max-width:440px}
.panel{margin-top:12px;display:flex;gap:12px;flex-wrap:wrap}
.btn.outline.resign{border-radius:999px;padding-inline:18px}
.btn.outline.resign:disabled{opacity:0.5}
.bidding-panel{flex-direction:column;align-items:stretch;gap:12px;max-width:460px}
.bidding-heading{font-weight:700;font-size:18px;color:var(--slate-900)}
.bidding-subheading{font-size:13px;color:var(--slate-600)}
.bidding-input-group{display:flex;flex-direction:column;gap:6px}
.bidding-waiting{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:10px;background:rgba(231,229,228,0.6);color:var(--stone-600);font-size:13px}
.bidding-waiting .spinner{width:16px;height:16px;border-width:2px}
.input{padding:6px 10px;border-radius:10px;border:1px solid var(--rose-300);}
.number{width:80px}
.small{font-size:12px;color:#475569}
.signed-in{display:flex;flex-direction:column;align-items:flex-end;text-align:right;line-height:1.2}
.signed-in-label{font-size:11px;color:rgba(71,85,105,0.85)}
.signed-in-name{font-weight:700;color:var(--slate-900)}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #f1f5f9;padding:6px 8px;text-align:left}
.table tr.selected{background:rgba(120,113,108,0.12)}
.stone-label{display:flex;flex-direction:column;line-height:1.2}
.stone-label-name{font-weight:600;color:var(--slate-700)}
.stone-label-id{font-size:11px;color:var(--slate-600)}
hr{border:none;border-top:1px solid #f1f5f9;margin:12px 0}

.locked-value{margin:8px 0;font-weight:600}
.reveal{margin-top:12px;display:flex;flex-direction:column;gap:8px}
.reveal-row{display:flex;gap:12px;flex-wrap:wrap;font-size:14px}

.dir-cell{display:flex;flex-direction:column;gap:6px}
.dir-grid{display:grid;grid-template-columns:repeat(3, auto);gap:4px;align-items:center;justify-items:center}
.dir-center{width:16px;height:16px}
.persistence-toggle{display:flex;align-items:center;margin-top:4px}
.dir-check{font-size:12px;color:#475569;white-space:nowrap;display:inline-flex;align-items:center;gap:4px;cursor:pointer;position:relative}
.dir-check input{margin:0;accent-color:var(--slate-600)}
.dir-check.hide-box{gap:0}
.dir-check.hide-box input{position:absolute;inset:0;opacity:0;margin:0;width:100%;height:100%;cursor:pointer}
.dir-check.hide-box input:focus{outline:none}
.dir-check.hide-box .dir-symbol{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;min-width:28px;font-size:18px;line-height:1;color:var(--slate-900);transition:color 0.15s ease;position:relative;border-radius:6px}
.dir-check.hide-box .dir-symbol svg{width:18px;height:18px}
.dir-check.hide-box input:checked + .dir-symbol{color:var(--stone-700)}
.dir-check.hide-box input:focus-visible + .dir-symbol{outline:2px solid rgba(120,113,108,0.35);outline-offset:2px}
.small-btn{font-size:12px;padding:4px 8px}
.warning{margin-top:8px;padding:8px 10px;border-radius:8px;background:rgba(231,229,228,0.7);color:var(--stone-600);font-size:13px}

.movement-card{margin-top:12px}

.temporary-screen{position:fixed;inset:0;background:rgba(15,23,42,0.76);display:flex;align-items:center;justify-content:center;z-index:30;padding:24px}
.temporary-card{background:#fff;padding:32px 36px;border-radius:24px;max-width:520px;width:100%;display:flex;flex-direction:column;gap:12px;align-items:center;text-align:center;box-shadow:0 24px 40px rgba(15,23,42,0.35)}
.temporary-countdown{font-size:40px;font-weight:800;color:var(--rose-500)}
.temporary-line{font-size:16px;color:var(--slate-700)}

.toast-stack{position:fixed;bottom:24px;right:24px;display:flex;flex-direction:column;gap:8px;z-index:20}
.toast{background:rgba(15,23,42,0.88);color:white;padding:10px 14px;border-radius:12px;box-shadow:0 8px 20px rgba(15,23,42,0.18);font-size:14px;max-width:280px}

.scores{margin-top:12px;display:flex;flex-direction:column;gap:12px}
.scores-header{font-weight:700;color:var(--slate-600)}
.scores-grid{display:flex;gap:12px;flex-wrap:wrap}
.scores-col{flex:1;min-width:140px;padding:12px;border-radius:12px;background:white;border:1px solid #e2e8f0;box-shadow:inset 0 0 0 1px rgba(148,163,184,0.12)}
.scores-col.white{background:linear-gradient(135deg,rgba(231,229,228,0.6),white)}
.scores-col.black{background:linear-gradient(135deg,rgba(148,163,184,0.35),white)}
.scores-title{font-weight:600;margin-bottom:8px}
.scores-line,.scores-total{display:flex;justify-content:space-between;font-size:13px}
.scores-total{margin-top:6px;font-weight:700}

.profile-page{min-height:100vh;position:relative;padding:24px;display:flex;flex-direction:column;align-items:center;gap:16px}
.profile-header{width:100%;display:flex;justify-content:flex-start}
.profile-card{background:rgba(245,245,244,0.92);border-radius:24px;border:1px solid rgba(168,162,158,0.35);box-shadow:0 20px 40px rgba(15,23,42,0.08);padding:32px;max-width:420px;width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}
.profile-name{font-size:36px;font-weight:800;color:var(--slate-900);text-align:center}
.profile-elo{font-size:18px;font-weight:600;color:var(--rose-500)}
.profile-actions{display:flex;gap:12px;justify-content:center;width:100%;flex-wrap:wrap}
.waiting-message{margin-top:12px;padding:12px 16px;border-radius:12px;background:rgba(231,229,228,0.7);color:var(--slate-700);display:flex;align-items:center;gap:12px;flex-wrap:wrap;justify-content:center}
.spinner{width:20px;height:20px;border-radius:50%;border:3px solid rgba(120,113,108,0.25);border-top-color:var(--rose-500);animation:spin 0.9s linear infinite}
.challenge-input{margin-top:8px;width:100%;display:flex;gap:8px}
.challenge-input input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid var(--rose-200);font-size:15px}
.challenge-feedback{margin-top:8px;font-size:14px;color:var(--rose-500);text-align:center}
.challenge-feedback.error{color:var(--stone-600)}
.challenge-banner{width:100%;max-width:720px;display:flex;align-items:center;justify-content:space-between;gap:16px;background:rgba(15,23,42,0.78);color:white;padding:14px 20px;border-radius:18px;box-shadow:0 18px 30px rgba(15,23,42,0.22)}
.challenge-banner-actions{display:flex;gap:12px;flex-wrap:wrap}

@keyframes spin{to{transform:rotate(360deg)}}
